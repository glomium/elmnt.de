{% load i18n menu_tags %}
{% get_available_languages as languages %}
<li class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
        <span class="hidden-xs">{{ current_language }}</span>
        <span class="sr-only hidden-xs">{% trans "Change language" %}</span>
        <span class="visible-xs">{% trans "Change language" %}</span>
    </a>
    <ul class="dropdown-menu" role="menu">
        {% for language in languages %}
        {% language language.0 %}
        <li>
            <a href="{% page_language_url language.0 %}">
                {% ifequal current_language language.0 %}
                <span class="glyphicon glyphicon-check" aria-hidden="true"></span>
                {% else %}
                <span class="glyphicon glyphicon-unchecked" aria-hidden="true"></span>
                {% endifequal %}
                {{ language.1 }} ({{ language.0 }})
                {% ifequal current_language language.0 %}
                <span class="sr-only">{% trans "current language" %}</span>
                {% endifequal %}
            </a>
        </li>
        {% endlanguage %}
        {% endfor %}
    </ul>
</li>
